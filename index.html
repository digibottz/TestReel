<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Reels</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <body class="dark">
  <div id="feed"></div>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #fff;
      overflow-x: hidden;
    }

    #feed {
      display: flex;
      flex-direction: column;
      align-items: center;
      scroll-behavior: smooth;
    }

    .post {
      position: relative;
      width: 100%;
      max-width: 480px;
      height: 90vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .post-text {
      font-size: 1.4rem;
      line-height: 1.6;
      padding: 10px;
    }

    /* User info bottom-left */
    .user-info {
      position: absolute;
      bottom: 20px;
      left: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .user-info img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid white;
      object-fit: cover;
    }

    .user-info .username {
      font-weight: bold;
    }

    /* Action icons on right side */
    .actions {
      position: absolute;
      right: 20px;
      bottom: 100px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
    }

    .actions button {
      background: none;
      border: none;
      color: white;
      font-size: 1.4rem;
      cursor: pointer;
      transition: 0.2s;
    }

    .actions button:hover {
      transform: scale(1.2);
      color: #1da1f2;
    }
  </style>
</body>

  <!-- Loading -->
  <div id="loading" class="loading">Loading...</div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <!-- Header -->
  <header class="header">
    <h1>Text Reels</h1>
    <button id="signInBtn">Sign In</button>
    <button id="signUpBtn">Sign Up</button>
    <button id="signOutBtn" style="display:none;">Sign Out</button>
  </header>

  <!-- Feed -->
  <div id="feed" class="feed"></div>

  <!-- Add Post Button -->
  <button id="addPostBtn" class="add-post-btn">+</button>

  <!-- Comment Modal -->
  <div id="commentModal" class="comment-modal">
    <div class="comment-header">
      <h3>Comments</h3>
      <button id="closeCommentModal">X</button>
    </div>
    <div id="commentsContainer"></div>
    <textarea id="newComment" placeholder="Add a comment..."></textarea>
    <button id="submitComment">Post</button>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth-compat.js"></script>

  <!-- App Scripts -->
  <script src="firebase-config.js"></script>
  <script src="utils.js"></script>
  <script src="auth.js"></script>
  <script src="posts.js"></script>
  <script src="comments.js"></script>
  <script src="profile.js"></script>
  <script src="app.js"></script>
</body>
</html>

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAmB-r-RgOsD9kj7hc0Xz4Pvjcqp2c1KuY",
  authDomain: "textreelsapp.firebaseapp.com",
  projectId: "textreelsapp",
  storageBucket: "textreelsapp.firebasestorage.app",
  messagingSenderId: "659142869313",
  appId: "1:659142869313:web:69c2edebdf391c24aee1c0",
  measurementId: "G-WVWYEJ3SND"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const feed = document.getElementById("feed");

async function loadPosts() {
  const q = query(collection(db, "posts"), orderBy("timestamp", "desc"));
  const snapshot = await getDocs(q);
  feed.innerHTML = "";

  snapshot.forEach(doc => {
    const data = doc.data();
    const post = document.createElement("div");
    post.classList.add("post");
    post.innerHTML = `
      <div class="post-text">${data.text || ""}</div>

      <div class="user-info">
        <img src="${data.profilePic || 'https://i.imgur.com/8Km9tLL.png'}" alt="profile">
        <div>
          <div class="username">${data.name || "Anonymous"}</div>
          <div class="userid">@${data.userId || "user1234"}</div>
        </div>
      </div>

      <div class="actions">
        <button class="like">‚ù§Ô∏è<br><small>${data.likes || 0}</small></button>
        <button class="comment">üí¨<br><small>${data.comments || 0}</small></button>
        <button class="share">üîÅ</button>
        <button class="repost">üîÑ</button>
      </div>
    `;
    feed.appendChild(post);
  });
}

loadPosts();

